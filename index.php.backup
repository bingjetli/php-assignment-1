<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lorsque | Homepage</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="css/style.css" rel="stylesheet">
  </head>
  <body>
    <?php
    require_once("common/database.php");
    $pdo = getNewPDOInstance();
    ?>


    <div class="container-fluid min-vh-100 x-max-vh-100 d-flex">

      <div class="row x-current">
        <p>Top half</p>
      </div>

      <div class="row x-flex-grow-2">
        <p>Bottom half</p>
      </div>

      <h2 class="text-muted">Recent</h2>
      <div class="row border rounded py-2">
        <div class="col d-flex flex-row flex-nowrap">

          <?php
          $recent_cocktails = getMostRecentCocktails($pdo);

          foreach($recent_cocktails as $c){
            $c_name = $c["name"];

            echo "<button class='btn btn-outline-secondary mx-1'>".
                 "$c_name".
                 "</button>";
          }
          ?>

        </div>
      </div>


      <h2 class="text-muted">Common</h2>
      <div class="row border rounded py-2">
        <div class="col d-flex flex-row flex-nowrap">

          <?php
          $common_cocktails = getMostCommonCocktails($pdo);

          foreach($common_cocktails as $c){
            $c_name = $c["name"];

            echo "<button class='btn btn-outline-secondary mx-1'>".
                 "$c_name".
                 "</button>";
          }
          ?>

        </div>
      </div>


      <div class="row py-2">

        <?php

        //Get all the ingredients from the database.
        $ingredients = getIngredients($pdo);
        $ingredient_category_map = generateIngredientCategoryMap($ingredients);

        foreach($ingredient_category_map as $c => $v){
          echo "<div class='col'>".
                 "<h3 class='text-muted'>$c</h3>".
                 "<div class='border rounded p-2'>";

          foreach($v as $i){
            $i_name = $i["name"];
            $ingredient_id = $i["ingredient_id"];


            echo     "<input type='checkbox' class='btn-check' id='$i_name-checkbox' form='create-cocktail-form' name='cocktailIngredients[$ingredient_id][name]' value='$i_name'>";
            echo     "<label for='$i_name-checkbox' class='btn btn-outline-secondary mx-1 my-1'>".
                     "<!--".
                     "<img src='https://placehold.co/100' alt='$i_name-image'>".
                     "<p class='fw-bold text-uppercase'>$i_name</p>".
                     "-->".
                     "$i_name".
                     "</label>";
            
          }

          echo   "</div>".
               "</div>";
        }
        ?>

      </div>


    </div>



    <?php die()?>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>
